(function(){var e={6184:function(e,t){t.property=[]},1372:function(e,t){t.state={Light:[{value:"on",label:"on"},{value:"off",label:"off"}],AC:[{value:"on",label:"on"},{value:"off",label:"off"}],Window:[{value:"open",label:"open"},{value:"close",label:"close"}],Door:[{value:"open",label:"open"},{value:"close",label:"close"}],Humidifier:[{value:"on",label:"on"},{value:"off",label:"off"}],AirPurifier:[{value:"on",label:"on"},{value:"off",label:"off"}],TV:[{value:"on",label:"on"},{value:"off",label:"off"}],Heater:[{value:"on",label:"on"},{value:"off",label:"off"}],Curtain:[{value:"open",label:"open"},{value:"close",label:"close"}],WaterDispenser:[{value:"on",label:"on"},{value:"off",label:"off"}],MicrowaveOven:[{value:"on",label:"on"},{value:"off",label:"off"}],Speaker:[{value:"on",label:"on"},{value:"off",label:"off"}],Temperature:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Brightness:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Humidity:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Noise:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],AirQuality:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],HumanState:[{value:"detected",label:"detected"},{value:"undetected",label:"undetected"}],Weather:[{value:"sunny",label:"sunny"},{value:"cloudy",label:"cloudy"},{value:"raining",label:"raining"},{value:"snowy",label:"snowy"}]}},4557:function(e,t){t.time=[]},1718:function(e,t,a){"use strict";var l=a(144),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container",attrs:{id:"app"}},[t("router-view")],1)},i=[],o=a(1001),n={},r=(0,o.Z)(n,s,i,!1,null,null,null),c=r.exports,p=a(8345),h=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("Property Description")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("UPLOAD")])],1),t("el-dialog",{attrs:{title:"UPLOAD CONFIGURATION",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"user name",prop:"user"}},[t("el-input",{attrs:{placeholder:"user name"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),t("el-form-item",{attrs:{label:"rule name",prop:"rule"}},[t("el-select",{attrs:{placeholder:"rule name",filterable:""},model:{value:e.form.rule,callback:function(t){e.$set(e.form,"rule",t)},expression:"form.rule"}},e._l(e.appOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("Confirm")])],1)],1),e._l(e.propertyList,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"Property "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"Abstract Level"}},[e._v(e._s(a.template))]),t("el-descriptions-item",{attrs:{label:"value"}},[e._v(e._s(a.description))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addItem()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Property")])]),t("el-dialog",{attrs:{title:"Template",visible:e.templateDialog},on:{"update:visible":function(t){e.templateDialog=t},close:e.cancelAddItem}},[t("el-form",{ref:"template",attrs:{model:e.template,"label-width":"20%",rules:e.template_rule}},[t("el-form-item",{attrs:{label:"Category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Template Type"},on:{change:e.categoryChange},model:{value:e.template.category,callback:function(t){e.$set(e.template,"category",t)},expression:"template.category"}},e._l(e.categoryOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,title:e.description}})})),1)],1),t("el-form-item",{attrs:{label:"Template",prop:"template"}},[t("el-select",{attrs:{placeholder:"Please Choose the Template"},model:{value:e.template.template,callback:function(t){e.$set(e.template,"template",t)},expression:"template.template"}},e._l(e.templateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,title:e.description}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddItem}},[e._v("Confirm")])],1)],1),t("EffectTime",{ref:"EffectTimeComponent"}),t("EventStateTime",{ref:"EventStateTimeComponent"}),t("StateTime",{ref:"StateTimeComponent"})],1)],2)],1)},u=[];a(7658);const m=[{value:"Temperature regulation effect conflict",label:"Temperature regulation effect conflict"},{value:"Brightness regulation",label:"Brightness regulation"},{value:"Raining/Window conflict",label:"Raining/Window conflict"},{value:"Unsafe use of microwave oven",label:"Unsafe use of microwave oven"},{value:"Unsafe use of water dispenser",label:"Unsafe use of water dispenser"},{value:"Excessive humidity",label:"Excessive humidity"},{value:"Low air quality",label:"Low air quality"},{value:"Waste of electricity",label:"Waste of electricity"},{value:"Drinking fountains work too long",label:"Drinking fountains work too long"},{value:"Excessive noise",label:"Excessive noise"}],f=[{value:"Time Dependent",label:"Time Dependent",description:""},{value:"Time Independent",label:"Time Independent",description:""}],d={"Time Dependent":[{value:"event-state-time",label:"event-state-time",description:"The [State] [always/never] occur [within/after] the [Time] of the [Event] occurrence."},{value:"effect-time",label:"effect-time",description:"The execution time of the [Effect] must be [greater than/less than] [Time]."},{value:"one-state",label:"one-state",description:"The duration of the [State] must be [greater than/less than] [Time]."},{value:"effect-state-time",label:"effect-state-time",description:"The [Effect] [always/never] happen [within/after] the [Time] while [state1, ..., staten]."}],"Time Independent":[{value:"effect-effect",label:"effect-effect",description:"Multiple [effect] [always/never] occur at the same time."},{value:"state-state",label:"state-state",description:"[state] should [always/never] be active while [state1, ..., staten]."},{value:"event-state",label:"event-state",description:"[Event] should [always/never] happen while [state1, ..., staten]."},{value:"effect-state",label:"effect-state",description:"[effect] should [always/never] happen while [state1, ..., staten]."}]},v=[{value:">",label:">"},{value:"<",label:"<"}],g=[{value:"event",label:"event"},{value:"action",label:"action"}];var b=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Effect-Time",visible:e.EffectTimeDialog},on:{"update:visible":function(t){e.EffectTimeDialog=t},close:e.cancelAddEffectTime}},[t("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"'The execution time of the [Effect] must be [greater than/less than] [Time].",type:"success",closable:!1}}),t("el-form",{ref:"EffectTime",attrs:{model:e.EffectTime,"label-width":"20%",rules:e.effect_time_rule}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.LocationChange},model:{value:e.EffectTime.location,callback:function(t){e.$set(e.EffectTime,"location",t)},expression:"EffectTime.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Effect",prop:"effect"}},[t("el-select",{attrs:{placeholder:"Please Choose the Effect"},model:{value:e.EffectTime.effect,callback:function(t){e.$set(e.EffectTime,"effect",t)},expression:"EffectTime.effect"}},e._l(e.effectsOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Symbol",prop:"symbol"}},[t("el-select",{attrs:{placeholder:"Please Choose the Symbol"},model:{value:e.EffectTime.symbol,callback:function(t){e.$set(e.EffectTime,"symbol",t)},expression:"EffectTime.symbol"}},e._l(e.symbolOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Time",prop:"time"}},[t("span",[t("el-input-number",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:e.EffectTime.time,callback:function(t){e.$set(e.EffectTime,"time",t)},expression:"EffectTime.time"}})],1),t("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"Please Choose the Minimum/Maximum Execution Time of the Effect"},model:{value:e.EffectTime.timeUnit,callback:function(t){e.$set(e.EffectTime,"timeUnit",t)},expression:"EffectTime.timeUnit"}},[t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"hour",value:"hour"}}),t("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddEffectTime}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddEffectTime}},[e._v("Confirm")])],1)],1)},T=[],y=a(6154),S={methods:{getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},cancelAddEffectTime(){this.EffectTimeDialog=!1},confirmAddEffectTime(){const e=this;this.$refs.EffectTime.validate((t=>{if(t){if(""===this.EffectTime.timeUnit)return void this.$message.warning("Please fill in the form correctly!");this.EffectTimeDialog=!1;const t=this.EffectTime.location+"."+this.EffectTime.effect+" & "+this.EffectTime.symbol+" & "+this.EffectTime.time+this.EffectTime.timeUnit;this.updateFlag?(this.PROPERTY.property[this.index].value=t,this.PROPERTY.property[this.index].description="The duration of [ "+this.EffectTime.location+"."+this.EffectTime.effect+" ] must [ "+this.EffectTime.symbol+" "+this.EffectTime.time+this.EffectTime.timeUnit+" ]"):this.PROPERTY.property.push({template:"effect-time",value:t,description:"The duration of [ "+this.EffectTime.location+"."+this.EffectTime.effect+" ] must [ "+this.EffectTime.symbol+" "+this.EffectTime.time+this.EffectTime.timeUnit+" ]"}),Object.keys(this.EffectTime).forEach((function(t){e.EffectTime[t]=""}))}else this.$message.warning("Please fill in the form correctly!")}))},LocationChange(e){this.EffectTime.effect=null,this.effectsOptions=[];const t=this;y.Z.get("/api/effect_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.effectsOptions.push({value:e.data[a].slice(7,e.data[a].length),label:e.data[a].slice(7,e.data[a].length)})})).catch((e=>{console.log(e)}))}},mounted(){this.getLocation()},data(){return{index:-1,updateFlag:!1,EffectTimeDialog:!1,symbolOptions:v,locationOptions:[],effectsOptions:[],EffectTime:{effect:"",location:"",symbol:"",time:"",timeUnit:""},effect_time_rule:{effect:[{required:!0,message:"please select the effect.",trigger:"blur"}],location:[{required:!0,message:"please select the location.",trigger:"blur"}],symbol:[{required:!0,message:"please select the symbol.",trigger:"blur"}],time:[{required:!0,message:"please fill the execution time of effect.",trigger:"blur"}]}}}},C=S,x=(0,o.Z)(C,b,T,!1,null,null,null),E=x.exports,_=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"event-state-time",visible:e.EventStateTimeDialog},on:{"update:visible":function(t){e.EventStateTimeDialog=t},close:e.cancelAddEventStateTime}},[t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [State] always occur [within/after] the [Time] of the [Event] occurrence.",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [State] never occur [within/after] the [Time] of the [Event] occurrence.",type:"success",closable:!1}}):e._e(),t("el-form",{ref:"EventStateTime",attrs:{model:e.EventStateTime,"label-width":"20%",rules:e.event_event_time_rule}},[t("el-form-item",{attrs:{label:"Event Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location of the Event"},on:{change:e.eventLocationChange},model:{value:e.EventStateTime.location,callback:function(t){e.$set(e.EventStateTime,"location",t)},expression:"EventStateTime.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Event",prop:"event"}},[t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Type"},on:{change:e.typeChange},model:{value:e.EventStateTime.type,callback:function(t){e.$set(e.EventStateTime,"type",t)},expression:"EventStateTime.type"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"event"==e.EventStateTime.type?t("el-select",{attrs:{placeholder:"Please Choose the Event"},model:{value:e.EventStateTime.event,callback:function(t){e.$set(e.EventStateTime,"event",t)},expression:"EventStateTime.event"}},e._l(e.eventOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"action"==e.EventStateTime.type?t("el-select",{attrs:{placeholder:"Please Choose the Action"},model:{value:e.EventStateTime.event,callback:function(t){e.$set(e.EventStateTime,"event",t)},expression:"EventStateTime.event"}},e._l(e.actionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1),t("el-form-item",{attrs:{label:"State Location",prop:"location_two"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.LocationChange},model:{value:e.EventStateTime.location_two,callback:function(t){e.$set(e.EventStateTime,"location_two",t)},expression:"EventStateTime.location_two"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:e.stateCategoryChange},model:{value:e.EventStateTime.category,callback:function(t){e.$set(e.EventStateTime,"category",t)},expression:"EventStateTime.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"State",prop:"state"}},["device"==e.EventStateTime.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.stateChange},model:{value:e.EventStateTime.state,callback:function(t){e.$set(e.EventStateTime,"state",t)},expression:"EventStateTime.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.EventStateTime.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.stateChange},model:{value:e.EventStateTime.state,callback:function(t){e.$set(e.EventStateTime,"state",t)},expression:"EventStateTime.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.EventStateTime.value,callback:function(t){e.$set(e.EventStateTime,"value",t)},expression:"EventStateTime.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Interval",prop:"interval"}},[t("span",[t("el-input-number",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:e.EventStateTime.interval,callback:function(t){e.$set(e.EventStateTime,"interval",t)},expression:"EventStateTime.interval"}})],1),t("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"Please Choose the Minimum Interval"},model:{value:e.EventStateTime.intervalUnit,callback:function(t){e.$set(e.EventStateTime,"intervalUnit",t)},expression:"EventStateTime.intervalUnit"}},[t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"hour",value:"hour"}}),t("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddEventStateTime}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddEventStateTime}},[e._v("Confirm")])],1)],1)},O=[],k={methods:{eventLocationChange(e){this.EventStateTime.event=null;const t=this;y.Z.get("/api/event_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{this.eventOptions=[];for(let a=0;a<e.data.length;a++)t.eventOptions.push({value:e.data[a].slice(6,e.data[a].length),label:e.data[a].slice(6,e.data[a].length)})})).catch((e=>{console.log(e)})),y.Z.get("/api/room_action/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{this.actionOptions=[];for(let a=0;a<e.data.length;a++)t.actionOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)}))},typeChange(e){this.EventStateTime.event=null},getLocation(){const e=this;y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},LocationChange(e){this.EventStateTime.state=null,this.EventStateTime.value=null,this.inquiryInfor(this.EventStateTime.category)},stateCategoryChange(e){this.EventStateTime.state=null,this.EventStateTime.value=null,this.inquiryInfor(e)},stateChange(e){this.EventStateTime.value=null,this.valueOptions=e?this.STATE.state[e]:[]},inquiryInfor(e){const t=this;"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+t.EventStateTime.location_two,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const l=e.data[a].slice(0,-3);t.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+t.EventStateTime.location_two,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.stateOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)})))},cancelAddEventStateTime(){this.EventStateTimeDialog=!1},confirmAddEventStateTime(){const e=this;this.$refs.EventStateTime.validate((t=>{if(t){if(""===this.EventStateTime.intervalUnit||""===this.EventStateTime.value||null===this.EventStateTime.value)return void this.$message.warning("Please fill in the form correctly!");this.EventStateTimeDialog=!1;const t=this.EventStateTime.location+"."+this.EventStateTime.type+"."+this.EventStateTime.event+" & "+this.EventStateTime.location_two+"."+this.EventStateTime.category+"."+this.EventStateTime.state+"."+this.EventStateTime.value+" & "+this.EventStateTime.interval+this.EventStateTime.intervalUnit+" & "+this.radio;this.updateFlag?(this.PROPERTY.property[this.index].value=t,this.PROPERTY.property[this.index].description="After ["+this.EventStateTime.location+"."+this.EventStateTime.event+"], within [ "+this.EventStateTime.interval+this.EventStateTime.intervalUnit+" ], [ "+this.EventStateTime.location_two+"."+this.EventStateTime.state+"."+this.EventStateTime.value+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"event-state-time",value:t,description:"After ["+this.EventStateTime.location+"."+this.EventStateTime.event+"], within [ "+this.EventStateTime.interval+this.EventStateTime.intervalUnit+" ], [ "+this.EventStateTime.location_two+"."+this.EventStateTime.state+"."+this.EventStateTime.value+" ] will [ "+this.radio+" ] happen."}),Object.keys(this.EventStateTime).forEach((function(t){e.EventStateTime[t]=""}))}else this.$message.warning("Please fill in the form correctly!")}))}},mounted(){this.getLocation()},data(){return{radio:"always",index:-1,updateFlag:!1,locationOptions:[],eventOptions:[],eventOptionsTwo:[],actionOptions:[],stateOptions:[],deviceOptions:[],valueOptions:[],actionOptionsTwo:[],typeOptions:g,symbolOptions:v,EventStateTimeDialog:!1,EventStateTime:{location:"",type:"",event:"",location_two:"",category:"",state:"",value:"",interval:"",intervalUnit:""},event_event_time_rule:{location:[{required:!0,message:"please select the event location.",trigger:"blur"}],event:[{required:!0,message:"please select the first event.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"please select the state.",trigger:"blur"}],location_two:[{required:!0,message:"please select the state location.",trigger:"blur"}],interval:[{required:!0,message:"please select the min time interval between event and state.",trigger:"blur"}]}}}},w=k,$=(0,o.Z)(w,_,O,!1,null,null,null),P=$.exports,L=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"State-Time",visible:e.StateTimeDialog},on:{"update:visible":function(t){e.StateTimeDialog=t},close:e.cancelAddStateTime}},[t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The duration of the [State] must be [greater than/less than] [Time].",type:"success",closable:!1}}),t("el-form",{ref:"StateTime",attrs:{model:e.StateTime,"label-width":"20%",rules:e.state_time_rule}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.LocationChange},model:{value:e.StateTime.location,callback:function(t){e.$set(e.StateTime,"location",t)},expression:"StateTime.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:e.stateCategoryChange},model:{value:e.StateTime.category,callback:function(t){e.$set(e.StateTime,"category",t)},expression:"StateTime.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"State",prop:"state"}},["device"==e.StateTime.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.stateChange},model:{value:e.StateTime.state,callback:function(t){e.$set(e.StateTime,"state",t)},expression:"StateTime.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.StateTime.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.stateChange},model:{value:e.StateTime.state,callback:function(t){e.$set(e.StateTime,"state",t)},expression:"StateTime.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.StateTime.value,callback:function(t){e.$set(e.StateTime,"value",t)},expression:"StateTime.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Symbol",prop:"symbol"}},[t("el-select",{attrs:{placeholder:"Please Choose the Symbol"},model:{value:e.StateTime.symbol,callback:function(t){e.$set(e.StateTime,"symbol",t)},expression:"StateTime.symbol"}},e._l(e.symbolOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Time",prop:"time"}},[t("span",[t("el-input-number",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:e.StateTime.time,callback:function(t){e.$set(e.StateTime,"time",t)},expression:"StateTime.time"}})],1),t("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"Please Choose the Minimum/Maximum Duration of the State"},model:{value:e.StateTime.timeUnit,callback:function(t){e.$set(e.StateTime,"timeUnit",t)},expression:"StateTime.timeUnit"}},[t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"hour",value:"hour"}}),t("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddStateTime}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddStateTime}},[e._v("Confirm")])],1)],1)},I=[],D={methods:{getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},cancelAddStateTime(){this.StateTimeDialog=!1},confirmAddStateTime(){const e=this;this.$refs.StateTime.validate((t=>{if(t){if(null===this.StateTime.timeUnit||""===this.StateTime.timeUnit||""===this.StateTime.value||null===this.StateTime.value)return void this.$message.warning("Please fill in the form correctly!");const t=this.StateTime.location+"."+this.StateTime.category+"."+this.StateTime.state+"."+this.StateTime.value+" & "+this.StateTime.symbol+" & "+this.StateTime.time+this.StateTime.timeUnit;this.updateFlag?(this.PROPERTY.property[this.index].value=t,this.PROPERTY.property[this.index].description="The duration of [ "+this.StateTime.location+"."+this.StateTime.state+"."+this.StateTime.value+" ] must [ "+this.StateTime.symbol+" "+this.StateTime.time+this.StateTime.timeUnit+" ]"):this.PROPERTY.property.push({template:"one-state",value:t,description:"The duration of [ "+this.StateTime.location+"."+this.StateTime.state+"."+this.StateTime.value+" ] must [ "+this.StateTime.symbol+" "+this.StateTime.time+this.StateTime.timeUnit+" ]"}),Object.keys(this.StateTime).forEach((function(t){e.StateTime[t]=""})),this.StateTimeDialog=!1}else this.$message.warning("Please fill in the form correctly!"),this.StateTimeDialog=!1}))},inquiryInfor(e){const t=this;"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+t.StateTime.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const l=e.data[a].slice(0,-3);t.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+t.StateTime.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.stateOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)})))},LocationChange(e){this.StateTime.state=null,this.StateTime.value=null,this.inquiryInfor(this.StateTime.category)},stateCategoryChange(e){this.StateTime.state=null,this.StateTime.value=null,this.inquiryInfor(e)},stateChange(e){this.StateTime.value=null,this.valueOptions=e?this.STATE.state[e]:[]}},mounted(){this.getLocation()},data(){return{index:-1,updateFlag:!1,symbolOptions:v,StateTimeDialog:!1,locationOptions:[],stateOptions:[],deviceOptions:[],valueOptions:[],StateTime:{location:"",category:"",state:"",value:"",symbol:"",time:"",timeUnit:""},state_time_rule:{category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"please select the state.",trigger:"blur"}],location:[{required:!0,message:"please select the location.",trigger:"blur"}],symbol:[{required:!0,message:"please select the symbol.",trigger:"blur"}],time:[{required:!0,message:"please fill the execution time of state.",trigger:"blur"}]}}}},R=D,A=(0,o.Z)(R,L,I,!1,null,null,null),q=A.exports,U={name:"HomeView",components:{EffectTime:E,EventStateTime:P,StateTime:q},data(){return{beginFlag:!1,propertyList:this.PROPERTY.property,form:{user:"",rule:""},rules:{user:[{required:!0,message:"please input your name.",trigger:"blur"}],rule:[{required:!0,message:"Please select the application name.",trigger:"blur"}]},template:{category:"",template:""},template_rule:{category:[{required:!0,message:"please select the category.",trigger:"change"}],template:[{required:!0,message:"please select the template.",trigger:"blur"}]},dialogVisible:!1,templateDialog:!1,appOptions:m,categoryOptions:f,tempTemplateOptions:d,symbolOptions:v,templateOptions:[]}},methods:{updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));let l="";switch(a.template){case"effect-effect":this.$router.push({name:"EffectEffect",params:{update:t,value:a.value}});break;case"effect-time":this.$refs.EffectTimeComponent.EffectTimeDialog=!0,this.$refs.EffectTimeComponent.updateFlag=!0,this.$refs.EffectTimeComponent.index=t,l=a.value.split(" & "),l[0]=l[0].split("."),this.$refs.EffectTimeComponent.LocationChange(l[0][0]),this.$refs.EffectTimeComponent.EffectTime={location:l[0][0],effect:l[0][1],symbol:l[1],time:parseInt(l[2]),timeUnit:/[^0-9]+/g.exec(l[2])[0]};break;case"state-state":this.$router.push({name:"StateState",params:{update:t,value:a.value}});break;case"event-state":this.$router.push({name:"EventState",params:{update:t,value:a.value}});break;case"event-state-time":this.$refs.EventStateTimeComponent.EventStateTimeDialog=!0,this.$refs.EventStateTimeComponent.updateFlag=!0,this.$refs.EventStateTimeComponent.index=t,l=a.value.split(" & "),l[0]=l[0].split("."),l[1]=l[1].split("."),this.$refs.EventStateTimeComponent.radio=l[3],this.$refs.EventStateTimeComponent.EventStateTime={location:l[0][0],type:l[0][1],event:l[0][2],location_two:l[1][0],category:l[1][1],state:l[1][2],value:l[1][3],interval:parseInt(l[2]),intervalUnit:/[^0-9]+/g.exec(l[2])[0]};break;case"one-state":this.$refs.StateTimeComponent.StateTimeDialog=!0,this.$refs.StateTimeComponent.updateFlag=!0,this.$refs.StateTimeComponent.index=t,l=a.value.split(" & "),l[0]=l[0].split("."),this.$refs.StateTimeComponent.StateTime={location:l[0][0],category:l[0][1],state:l[0][2],value:l[0][3],symbol:l[1],time:parseInt(l[2]),timeUnit:/[^0-9]+/g.exec(l[2])[0]},this.$refs.StateTimeComponent.LocationChange(l[0][0]),this.$refs.StateTimeComponent.stateChange(l[0][2]),this.$refs.StateTimeComponent.StateTime={location:l[0][0],category:l[0][1],state:l[0][2],value:l[0][3],symbol:l[1],time:parseInt(l[2]),timeUnit:/[^0-9]+/g.exec(l[2])[0]};break;case"effect-state":this.$router.push({name:"EffectState",params:{update:t,value:a.value}});break;case"effect-state-time":this.$router.push({name:"EffectStateTime",params:{update:t,value:a.value}});break;default:break}}},removeItem(e){this.propertyList.splice(e,1),this.refresh()},addItem(){!1===this.beginFlag&&(this.beginFlag=!0,this.TIME.time=(new Date).getTime()),this.templateDialog=!0,this.update=-1},cancelAddItem(){this.templateDialog=!1,this.refresh()},confimAddItem(){const e=this;this.$refs.template.validate((t=>{if(t){switch(this.templateDialog=!1,this.template.template){case"effect-effect":this.$router.push({name:"EffectEffect",params:{update:-1,value:""}});break;case"effect-time":this.$refs.EffectTimeComponent.EffectTimeDialog=!0,this.$refs.EffectTimeComponent.updateFlag=!1,this.$refs.EffectTimeComponent.index=-1;break;case"state-state":this.$router.push({name:"StateState",params:{update:-1,value:""}});break;case"event-state":this.$router.push({name:"EventState",params:{update:-1,value:""}});break;case"event-state-time":this.$refs.EventStateTimeComponent.EventStateTimeDialog=!0,this.$refs.EventStateTimeComponent.updateFlag=!1,this.$refs.EventStateTimeComponent.index=-1;break;case"one-state":this.$refs.StateTimeComponent.StateTimeDialog=!0,this.$refs.StateTimeComponent.updateFlag=!1,this.$refs.StateTimeComponent.index=-1;break;case"effect-state":this.$router.push({name:"EffectState",params:{update:-1,value:""}});break;case"effect-state-time":this.$router.push({name:"EffectStateTime",params:{update:-1,value:""}});break}Object.keys(this.template).forEach((function(t){e.template[t]=""}))}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()},categoryChange(e){this.template.template=null,this.templateOptions=this.tempTemplateOptions[e]},check(){},upload(){this.beginFlag=!1;const e=this;if(this.propertyList.length<1)return this.$message.warning("There are no properties to upload!"),void(this.dialogVisible=!1);const t={};let a="";for(let l=0;l<this.propertyList.length;l++)t[l]=this.propertyList[l],"ltl"in this.propertyList[l]&&(a=""===a?this.propertyList[l].ltl:a+" | ("+this.propertyList[l].ltl+")");this.$refs.form.validate((a=>{a&&(e.dialogVisible=!1,(0,y.Z)({url:"/upload/saveByTemplate",method:"POST",data:{user:e.form.user,dsl:t,time:((new Date).getTime()-e.TIME.time)/1e3,rule:e.form.rule}}).then((t=>{e.PROPERTY.property=[],e.propertyList=[],e.form={user:"",rule:""},e.template={category:"",template:""}})))}))}},mounted(){}},V=U,F=(0,o.Z)(V,h,u,!1,null,"7ad543d3",null),Z=F.exports,Y=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"effect-effect-container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("Effect-Effect")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("CONFIRM")])],1),t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"Multiple [effect] always occur at the same time.",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"Multiple [effect] never occur at the same time.",type:"success",closable:!1}}):e._e(),t("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("Please Confirm the Information")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("Confirm")])],1)]),e._l(e.effectList,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"effect "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"location"}},[e._v(e._s(a.location))]),t("el-descriptions-item",{attrs:{label:"effect"}},[e._v(e._s(a.effect))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addItem()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add Effect")])]),t("el-dialog",{attrs:{title:"Effect",visible:e.chooseDialog},on:{"update:visible":function(t){e.chooseDialog=t},close:e.cancelAddItem}},[t("el-form",{ref:"effectTemplate",attrs:{model:e.effectTemplate,"label-width":"20%",rules:e.rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.LocationChange},model:{value:e.effectTemplate.location,callback:function(t){e.$set(e.effectTemplate,"location",t)},expression:"effectTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"effect",prop:"effect"}},[t("el-select",{attrs:{placeholder:"Please Choose the Effect"},model:{value:e.effectTemplate.effect,callback:function(t){e.$set(e.effectTemplate,"effect",t)},expression:"effectTemplate.effect"}},e._l(e.effectsOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddItem}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddItem}},[e._v("Confirm")])],1)],1)],1)],2)],1)},M=[],j={name:"EffectEffect",components:{},data(){return{radio:"always",dialogVisible:!1,chooseDialog:!1,rules:{effect:[{required:!0,message:"please select the effect.",trigger:"blur"}],location:[{required:!0,message:"please select the location.",trigger:"blur"}]},effectList:[],effectTemplate:{effect:"",location:""},index:"",updateFlag:!1,effectsOptions:[],locationOptions:[]}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const e=this.$route.params.value.split(" & ");this.radio=e[2];for(let t=0;t<e.length-1;t++){const a=e[t].split(".");this.effectList.push({location:a[0],effect:a[1]})}}},methods:{updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));this.chooseDialog=!0,this.effectTemplate=a;const l=this;y.Z.get("/api/effect_list/"+this.effectTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{l.effectsOptions=[];for(let t=0;t<e.data.length;t++)l.effectsOptions.push({value:e.data[t].slice(7,e.data[t].length),label:e.data[t].slice(7,e.data[t].length)})})).catch((e=>{console.log(e)})),this.index=t,this.updateFlag=!0}},removeItem(e){this.effectList.splice(e,1),this.refresh()},LocationChange(e){this.effectTemplate.effect=null;const t=this;y.Z.get("/api/effect_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{this.effectsOptions=[];for(let a=0;a<e.data.length;a++)t.effectsOptions.push({value:e.data[a].slice(7,e.data[a].length),label:e.data[a].slice(7,e.data[a].length)})})).catch((e=>{console.log(e)}))},getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{e.locationOptions=[];for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},Confirm(){if(this.effectList.length<2)return this.$message.warning("Please select more than two effects!"),void(this.dialogVisible=!1);let e=this.effectList[0].location+"."+this.effectList[0].effect,t=this.effectList[0].location+"."+this.effectList[0].effect;for(let l=1;l<this.effectList.length;l++)e=e+" & "+this.effectList[l].location+"."+this.effectList[l].effect,t=t+" ， "+this.effectList[l].location+"."+this.effectList[l].effect;e=e+" & "+this.radio;const a=this.ltlMethod.getLTL(this.effectList);a.then((a=>{let l=a.substring(3,a.length);l="always"===this.radio?"G("+l+")":"F("+l+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].description="[ "+t+" ] are [ "+this.radio+" ] occur simultaneously.",this.PROPERTY.property[this.$route.params.update].ltl=l):this.PROPERTY.property.push({template:"effect-effect",value:e,description:"[ "+t+" ] are [ "+this.radio+" ] occur simultaneously.",ltl:l}),this.$router.back()}))},addItem(){this.chooseDialog=!0,this.updateFlag=!1},cancelAddItem(){this.chooseDialog=!1,this.refresh()},confimAddItem(){this.$refs.effectTemplate.validate((e=>{e?(this.chooseDialog=!1,this.updateFlag?this.effectList[this.index]=this.effectTemplate:this.effectList.push(this.effectTemplate),this.cancelAddItem(),this.effectTemplate={effect:"",location:""}):this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},N=j,z=(0,o.Z)(N,Y,M,!1,null,null,null),J=z.exports,W=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"state-state-container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("State-State-Condition")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("CONFIRM")])],1),t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[state] should always be active while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[state] should never be active while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),t("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("Please Confirm the Information")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("Confirm")])],1)]),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"left"}},[t("el-form",{ref:"state",attrs:{model:e.state,"label-width":"20%",rules:e.state_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.stateLocationChange},model:{value:e.state.location,callback:function(t){e.$set(e.state,"location",t)},expression:"state.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:e.stateCategoryChange},model:{value:e.state.category,callback:function(t){e.$set(e.state,"category",t)},expression:"state.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==e.state.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.stateChange},model:{value:e.state.state,callback:function(t){e.$set(e.state,"state",t)},expression:"state.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.state.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.stateChange},model:{value:e.state.state,callback:function(t){e.$set(e.state,"state",t)},expression:"state.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.state.value,callback:function(t){e.$set(e.state,"value",t)},expression:"state.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("el-col",{attrs:{span:12}},[e._l(e.states,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"State "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"location"}},[e._v(e._s(a.location))]),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addState()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add State")])]),t("el-dialog",{attrs:{title:"State",visible:e.stateDialog},on:{"update:visible":function(t){e.stateDialog=t},close:e.cancelAddState}},[t("el-form",{ref:"statesTemplate",attrs:{model:e.statesTemplate,"label-width":"20%",rules:e.state_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.statesLocationChange},model:{value:e.statesTemplate.location,callback:function(t){e.$set(e.statesTemplate,"location",t)},expression:"statesTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:e.statesCategoryChange},model:{value:e.statesTemplate.category,callback:function(t){e.$set(e.statesTemplate,"category",t)},expression:"statesTemplate.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.devicesOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.statesOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.statesTemplate.value,callback:function(t){e.$set(e.statesTemplate,"value",t)},expression:"statesTemplate.value"}},e._l(e.valuesOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddState}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddState}},[e._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},H=[],B={name:"StateState",components:{},data(){return{dialogVisible:!1,stateDialog:!1,state:{category:"",state:"",location:"",value:""},states:[],statesTemplate:{category:"",state:"",location:"",value:""},state_rules:{location:[{required:!0,message:"Please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},radio:"always",locationOptions:[],stateOptions:[],statesOptions:[],deviceOptions:[],devicesOptions:[],valueOptions:[],valuesOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const e=this.$route.params.value.split(" & ");e[1]=e[1].substring(2),e[e.length-2]=e[e.length-2].substring(0,e[e.length-2].length-2);const t=e[0].split(".");this.radio=e[e.length-1],this.state={location:t[0],category:t[1],state:t[2],value:t[3]},this.stateLocationChange(t[0]),this.stateChange(t[2]),this.state={location:t[0],category:t[1],state:t[2],value:t[3]};for(let a=1;a<e.length-1;a++){const t=e[a].split(".");this.states.push({location:t[0],category:t[1],state:t[2],value:t[3]})}}},methods:{updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));this.stateDialog=!0,this.statesTemplate=a,this.statesChange(this.statesTemplate.state),this.inquiryInfor(this.statesTemplate.category,"statesTemplate"),this.index=t,this.updateFlag=!0}},removeItem(e){this.states.splice(e,1),this.refresh()},getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},Confirm(){this.$refs.state.validate((e=>{if(e){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);if(""===this.state.value||null===this.state.value)return this.$message.warning("Please fill in the form correctly!"),void(this.dialogVisible=!1);let e=this.state.location+"."+this.state.category+"."+this.state.state+"."+this.state.value+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,t=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let l=1;l<this.states.length;l++)e=e+" & "+this.states[l].location+"."+this.states[l].category+"."+this.states[l].state+"."+this.states[l].value,t=t+" , "+this.states[l].location+"."+this.states[l].state+"."+this.states[l].value;e=e+" ] & "+this.radio;let a="";a="always"===this.radio?"G("+this.state.location+"."+this.state.category+"."+this.state.state+"."+this.state.value+" & "+t+")":"F("+this.state.location+"."+this.state.category+"."+this.state.state+"."+this.state.value+" & "+t+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].description="[ "+t+", "+this.state.location+"."+this.state.category+"."+this.state.state+"."+this.state.value+" ] will [ "+this.radio+" ] happen simultaneously.",this.PROPERTY.property[this.$route.params.update].ltl=a):this.PROPERTY.property.push({template:"state-state",value:e,description:"[ "+t+", "+this.state.location+"."+this.state.category+"."+this.state.state+"."+this.state.value+" ] will [ "+this.radio+" ] happen simultaneously.",ltl:a}),this.dialogVisible=!1,this.$router.back()}else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))},inquiryInfor(e,t){const a=this;if("state"===t)"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+a.state.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let t=0;t<e.data.length;t++){const l=e.data[t].slice(0,-3);a.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+a.state.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let t=0;t<e.data.length;t++)a.stateOptions.push({value:e.data[t],label:e.data[t]})})).catch((e=>{console.log(e)})));else if("statesTemplate"===t){const e=this;"device"===this.statesTemplate.category?(this.devicesOptions=[],y.Z.get("/api/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const l=t.data[a].slice(0,-3);e.devicesOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===this.statesTemplate.category&&(this.statesOptions=[],y.Z.get("/api/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.statesOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)})))}},stateLocationChange(e){this.state.state=null,this.state.value=null,this.inquiryInfor(this.state.category,"state")},stateCategoryChange(e){this.state.state=null,this.state.value=null,this.inquiryInfor(e,"state")},statesLocationChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category,"statesTemplate")},statesCategoryChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(e,"statesTemplate")},stateChange(e){this.state.value=null,this.valueOptions=e?this.STATE.state[e]:[]},statesChange(e){this.statesTemplate.value=null,this.statesTemplate.state?this.valuesOptions=this.STATE.state[e]:this.valuesOptions=[]},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((e=>{if(e){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},G=B,Q=(0,o.Z)(G,W,H,!1,null,null,null),K=Q.exports,X=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"event-state-container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("Event-State-Condition")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("CONFIRM")])],1),t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Event] should always happen while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Event] should never happen while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),t("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("Please Confirm the Information")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("Confirm")])],1)]),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"left"}},[t("el-form",{ref:"eventTemplate",attrs:{model:e.eventTemplate,"label-width":"20%",rules:e.event_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.eventLocationChange},model:{value:e.eventTemplate.location,callback:function(t){e.$set(e.eventTemplate,"location",t)},expression:"eventTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Event",prop:"event"}},[t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Type"},on:{change:e.typeChange},model:{value:e.eventTemplate.type,callback:function(t){e.$set(e.eventTemplate,"type",t)},expression:"eventTemplate.type"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"event"==e.eventTemplate.type?t("el-select",{attrs:{placeholder:"Please Choose the Event"},model:{value:e.eventTemplate.event,callback:function(t){e.$set(e.eventTemplate,"event",t)},expression:"eventTemplate.event"}},e._l(e.eventOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"action"==e.eventTemplate.type?t("el-select",{attrs:{placeholder:"Please Choose the Action"},model:{value:e.eventTemplate.event,callback:function(t){e.$set(e.eventTemplate,"event",t)},expression:"eventTemplate.event"}},e._l(e.actionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1)],1)],1)],1),t("el-col",{attrs:{span:12}},[e._l(e.states,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"State "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"location"}},[e._v(e._s(a.location))]),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addState()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add State")])]),t("el-dialog",{attrs:{title:"State",visible:e.stateDialog},on:{"update:visible":function(t){e.stateDialog=t},close:e.cancelAddState}},[t("el-form",{ref:"statesTemplate",attrs:{model:e.statesTemplate,"label-width":"20%",rules:e.state_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.stateLocationChange},model:{value:e.statesTemplate.location,callback:function(t){e.$set(e.statesTemplate,"location",t)},expression:"statesTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"Category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:e.stateCategoryChange},model:{value:e.statesTemplate.category,callback:function(t){e.$set(e.statesTemplate,"category",t)},expression:"statesTemplate.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"State",prop:"state"}},["device"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.statesTemplate.value,callback:function(t){e.$set(e.statesTemplate,"value",t)},expression:"statesTemplate.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddState}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddState}},[e._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},ee=[],te={name:"EventState",components:{},data(){return{dialogVisible:!1,stateDialog:!1,eventTemplate:{type:"",event:"",location:""},states:[],statesTemplate:{category:"",state:"",value:"",location:""},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},event_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],event:[{required:!0,message:"please select the event.",trigger:"blur"}]},radio:"always",stateOptions:[],typeOptions:g,deviceOptions:[],eventOptions:[],actionOptions:[],locationOptions:[],valueOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const e=this.$route.params.value.split(" & ");e[1]=e[1].substring(2),e[e.length-2]=e[e.length-2].substring(0,e[e.length-2].length-2);const t=e[0].split(".");this.radio=e[e.length-1],this.eventLocationChange(t[0]),this.eventTemplate={location:t[0],type:t[1],event:t[2]};for(let a=1;a<e.length-1;a++){const t=e[a].split(".");this.states.push({location:t[0],category:t[1],state:t[2],value:t[3]})}}},methods:{eventLocationChange(e){this.eventTemplate.event=null;const t=this;y.Z.get("/api/event_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{this.eventOptions=[];for(let a=0;a<e.data.length;a++)t.eventOptions.push({value:e.data[a].slice(6,e.data[a].length),label:e.data[a].slice(6,e.data[a].length)})})).catch((e=>{console.log(e)})),y.Z.get("/api/room_action/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{this.actionOptions=[];for(let a=0;a<e.data.length;a++)t.actionOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)}))},typeChange(e){this.eventTemplate.event=null},updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=t,this.updateFlag=!0}},removeItem(e){this.states.splice(e,1),this.refresh()},statesChange(e){this.statesTemplate.value=null,this.statesTemplate.state?this.valueOptions=this.STATE.state[e]:this.valueOptions=[]},getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},Confirm(){this.$refs.eventTemplate.validate((e=>{if(e){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let e=this.eventTemplate.location+"."+this.eventTemplate.type+"."+this.eventTemplate.event+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,t=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let a=1;a<this.states.length;a++)e=e+" & "+this.states[a].location+"."+this.states[a].category+"."+this.states[a].state+"."+this.states[a].value,t=t+" , "+this.states[a].location+"."+this.states[a].state+"."+this.states[a].value;e=e+" ] & "+this.radio,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].description="When [ "+t+" ] , [ "+this.eventTemplate.location+"."+this.eventTemplate.event+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"event-state",value:e,description:"When [ "+t+" ] , [ "+this.eventTemplate.location+"."+this.eventTemplate.event+" ] will [ "+this.radio+" ] happen."}),this.dialogVisible=!1,this.$router.back()}else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))},inquiryInfor(e){const t=this;"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const l=e.data[a].slice(0,-3);t.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.stateOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)})))},stateLocationChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},stateCategoryChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(e)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((e=>{if(e){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",location:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},ae=te,le=(0,o.Z)(ae,X,ee,!1,null,null,null),se=le.exports,ie=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"effect-state-container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("State-Effect")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("CONFIRM")])],1),t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Effect] should always happen while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Effect] should never happen while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),t("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("Please Confirm the Information")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("Confirm")])],1)]),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"left"}},[t("el-form",{ref:"effectTemplate",attrs:{model:e.effectTemplate,"label-width":"20%",rules:e.effect_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.locationChange},model:{value:e.effectTemplate.location,callback:function(t){e.$set(e.effectTemplate,"location",t)},expression:"effectTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"effect",prop:"effect"}},[t("el-select",{attrs:{placeholder:"Please Choose the Effect"},model:{value:e.effectTemplate.effect,callback:function(t){e.$set(e.effectTemplate,"effect",t)},expression:"effectTemplate.effect"}},e._l(e.effectsOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("el-col",{attrs:{span:12}},[e._l(e.states,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"State "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.location))]),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addState()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add State")])]),t("el-dialog",{attrs:{title:"State",visible:e.stateDialog},on:{"update:visible":function(t){e.stateDialog=t},close:e.cancelAddState}},[t("el-form",{ref:"statesTemplate",attrs:{model:e.statesTemplate,"label-width":"20%",rules:e.state_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.stateLocationChange},model:{value:e.statesTemplate.location,callback:function(t){e.$set(e.statesTemplate,"location",t)},expression:"statesTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category  "},on:{change:e.statesCategoryChange},model:{value:e.statesTemplate.category,callback:function(t){e.$set(e.statesTemplate,"category",t)},expression:"statesTemplate.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.statesTemplate.value,callback:function(t){e.$set(e.statesTemplate,"value",t)},expression:"statesTemplate.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddState}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddState}},[e._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},oe=[],ne={name:"EffectState",components:{},data(){return{dialogVisible:!1,stateDialog:!1,effectTemplate:{effect:"",location:""},states:[],statesTemplate:{category:"",state:"",value:"",location:""},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},effect_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],effect:[{required:!0,message:"please select the effect.",trigger:"blur"}]},radio:"always",stateOptions:[],deviceOptions:[],effectsOptions:[],locationOptions:[],valueOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const e=this.$route.params.value.split(" & ");e[1]=e[1].substring(2),e[e.length-2]=e[e.length-2].substring(0,e[e.length-2].length-2);const t=e[0].split(".");this.radio=e[e.length-1],this.locationChange(t[0]),this.effectTemplate={location:t[0],effect:t[1]};for(let a=1;a<e.length-1;a++){const t=e[a].split(".");this.states.push({location:t[0],category:t[1],state:t[2],value:t[3]})}}},methods:{updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=t,this.updateFlag=!0}},removeItem(e){this.states.splice(e,1),this.refresh()},locationChange(e){this.effectTemplate.effect=null,this.effectsOptions=[];const t=this;y.Z.get("/api/effect_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.effectsOptions.push({value:e.data[a].slice(7,e.data[a].length),label:e.data[a].slice(7,e.data[a].length)})})).catch((e=>{console.log(e)}))},stateLocationChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},statesChange(e){this.statesTemplate.value=null,this.statesTemplate.state?this.valueOptions=this.STATE.state[e]:this.valueOptions=[]},getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},Confirm(){this.$refs.effectTemplate.validate((e=>{if(e){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let e=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value,t=this.effectTemplate.location+"."+this.effectTemplate.effect+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,a=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let s=1;s<this.states.length;s++)t=t+" & "+this.states[s].location+"."+this.states[s].category+"."+this.states[s].state+"."+this.states[s].value,a=a+" , "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value,e=e+" & "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value;t=t+" ] & "+this.radio;const l=this.ltlMethod.getLTL([this.effectTemplate]);l.then((l=>{let s=l.substring(3,l.length)+") & ("+e+")";s="always"===this.radio?"G("+s+")":"F("+s+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].description="When [ "+a+" ] , [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen.",this.PROPERTY.property[this.$route.params.update].ltl=s):this.PROPERTY.property.push({template:"effect-state",value:t,description:"When [ "+a+" ] , [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen.",ltl:s}),this.$router.back()}))}else this.$message.warning("Please fill in the form correctly!")}))},inquiryInfor(e){const t=this;"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const l=e.data[a].slice(0,-3);t.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.stateOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)})))},statesCategoryChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(e)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.statesTemplate={category:"",state:"",value:"",location:""},this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((e=>{if(e){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:"",location:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},re=ne,ce=(0,o.Z)(re,ie,oe,!1,null,null,null),pe=ce.exports,he=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"effect-state-time-container"},[t("el-main",[t("h1",{staticClass:"home-title"},[e._v("State-Effect-Time")]),t("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[t("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("CONFIRM")])],1),t("el-radio",{attrs:{label:"always"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("always")]),t("el-radio",{attrs:{label:"never"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("never")]),"always"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [Effect] always happen [within/after] the [Time] while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),"never"==e.radio?t("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [Effect] never happen [within/after] the [Time] while [state1, ..., staten].",type:"success",closable:!1}}):e._e(),t("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("Please Confirm the Information")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("Confirm")])],1)]),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12}},[t("el-row",{attrs:{gutter:30}},[t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"left"}},[t("el-form",{ref:"effectTemplate",attrs:{model:e.effectTemplate,"label-width":"20%",rules:e.effect_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.locationChange},model:{value:e.effectTemplate.location,callback:function(t){e.$set(e.effectTemplate,"location",t)},expression:"effectTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"effect",prop:"effect"}},[t("el-select",{attrs:{placeholder:"Please Choose the Effect"},model:{value:e.effectTemplate.effect,callback:function(t){e.$set(e.effectTemplate,"effect",t)},expression:"effectTemplate.effect"}},e._l(e.effectsOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("el-row",{attrs:{gutter:30}},[t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"left"}},[t("el-form",{ref:"timeTemplate",attrs:{model:e.timeTemplate,"label-width":"20%",rules:e.time_rules}},[t("el-form-item",{attrs:{label:"Time",prop:"time"}},[t("span",[t("el-input-number",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:e.timeTemplate.time,callback:function(t){e.$set(e.timeTemplate,"time",t)},expression:"timeTemplate.time"}})],1)]),t("el-form-item",{attrs:{label:"Time Unit",prop:"timeUnit"}},[t("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"Please Choose the Minimum/Maximum Execution Time of the Effect"},model:{value:e.timeTemplate.timeUnit,callback:function(t){e.$set(e.timeTemplate,"timeUnit",t)},expression:"timeTemplate.timeUnit"}},[t("el-option",{attrs:{label:"min",value:"min"}}),t("el-option",{attrs:{label:"hour",value:"hour"}}),t("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1)],1)],1)],1),t("el-col",{attrs:{span:12}},[e._l(e.states,(function(a,l){return t("div",{key:l},[t("el-card",{staticClass:"card-margin"},[t("el-descriptions",{attrs:{title:"State "+(l+1),column:1,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.updateItem(a,l)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeItem(l)}}})],1),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.location))]),t("el-descriptions-item",{attrs:{label:"state"}},[e._v(e._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),t("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addState()}}},[t("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[e._v(" Add State")])]),t("el-dialog",{attrs:{title:"State",visible:e.stateDialog},on:{"update:visible":function(t){e.stateDialog=t},close:e.cancelAddState}},[t("el-form",{ref:"statesTemplate",attrs:{model:e.statesTemplate,"label-width":"20%",rules:e.state_rules}},[t("el-form-item",{attrs:{label:"Location",prop:"location"}},[t("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:e.stateLocationChange},model:{value:e.statesTemplate.location,callback:function(t){e.$set(e.statesTemplate,"location",t)},expression:"statesTemplate.location"}},e._l(e.locationOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"category",prop:"category"}},[t("el-select",{attrs:{placeholder:"Please Choose the Category  "},on:{change:e.statesCategoryChange},model:{value:e.statesTemplate.category,callback:function(t){e.$set(e.statesTemplate,"category",t)},expression:"statesTemplate.category"}},[t("el-option",{attrs:{label:"device",value:"device"}}),t("el-option",{attrs:{label:"state",value:"state"}})],1)],1),t("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.deviceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"state"==e.statesTemplate.category?t("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:e.statesChange},model:{value:e.statesTemplate.state,callback:function(t){e.$set(e.statesTemplate,"state",t)},expression:"statesTemplate.state"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),t("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:e.statesTemplate.value,callback:function(t){e.$set(e.statesTemplate,"value",t)},expression:"statesTemplate.value"}},e._l(e.valueOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelAddState}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confimAddState}},[e._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},ue=[],me={name:"StatetimeTemplate",components:{},data(){return{timeTemplate:{symbel:"",time:"",timeUnit:""},dialogVisible:!1,stateDialog:!1,effectTemplate:{effect:"",location:""},symbolOptions:v,states:[],statesTemplate:{category:"",state:"",value:"",location:""},time_rules:{time:[{required:!0,message:"please fill the execution time of effect.",trigger:"blur"}],timeUnit:[{required:!0,message:"please fill the execution timeUnit of effect.",trigger:"blur"}]},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},effect_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],effect:[{required:!0,message:"please select the effect.",trigger:"blur"}]},radio:"always",stateOptions:[],deviceOptions:[],effectsOptions:[],locationOptions:[],valueOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const e=this.$route.params.value.split(" & ");e[1]=e[1].substring(2),e[e.length-3]=e[e.length-3].substring(0,e[e.length-3].length-2);const t=e[0].split(".");this.radio=e[e.length-2],this.locationChange(t[0]),this.effectTemplate={location:t[0],effect:t[1]},this.timeTemplate={time:parseInt(e[e.length-1]),timeUnit:/[^0-9]+/g.exec(e[e.length-1])[0]};for(let a=1;a<e.length-2;a++){const t=e[a].split(".");this.states.push({location:t[0],category:t[1],state:t[2],value:t[3]})}}},methods:{updateItem(e,t){if(e&&t>=0){const a=JSON.parse(JSON.stringify(e));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=t,this.updateFlag=!0}},removeItem(e){this.states.splice(e,1),this.refresh()},locationChange(e){this.effectTemplate.effect=null,this.effectsOptions=[];const t=this;y.Z.get("/api/effect_list/"+e,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.effectsOptions.push({value:e.data[a].slice(7,e.data[a].length),label:e.data[a].slice(7,e.data[a].length)})})).catch((e=>{console.log(e)}))},stateLocationChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},statesChange(e){this.statesTemplate.value=null,this.statesTemplate.state?this.valueOptions=this.STATE.state[e]:this.valueOptions=[]},getLocation(){const e=this;this.locationOptions=[],y.Z.get("/api/room_list",{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.locationOptions.push({value:t.data[a],label:t.data[a]})})).catch((e=>{console.log(e)}))},Confirm(){this.$refs.effectTemplate.validate((e=>{this.$refs.timeTemplate.validate((t=>{if(e&&t){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let e=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value,t=this.effectTemplate.location+"."+this.effectTemplate.effect+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,a=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let l=1;l<this.states.length;l++)t=t+" & "+this.states[l].location+"."+this.states[l].category+"."+this.states[l].state+"."+this.states[l].value,a=a+" , "+this.states[l].location+"."+this.states[l].state+"."+this.states[l].value,e=e+" & "+this.states[l].location+"."+this.states[l].state+"."+this.states[l].value;t=t+" ] & "+this.radio+" & "+this.timeTemplate.time+this.timeTemplate.timeUnit,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].description="After ["+a+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"effect-state-time",value:t,description:"After ["+a+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen."}),this.$router.back()}else this.dialogVisible=!1,this.$message.warning("Please fill in the form correctly!")}))}))},inquiryInfor(e){const t=this;"device"===e?(this.deviceOptions=[],y.Z.get("/api/room_device/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const l=e.data[a].slice(0,-3);t.deviceOptions.push({value:l,label:l})}})).catch((e=>{console.log(e)}))):"state"===e&&(this.stateOptions=[],y.Z.get("/api/room_state/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.stateOptions.push({value:e.data[a],label:e.data[a]})})).catch((e=>{console.log(e)})))},statesCategoryChange(e){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(e)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.statesTemplate={category:"",state:"",value:"",location:""},this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((e=>{if(e){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:"",location:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},fe=me,de=(0,o.Z)(fe,he,ue,!1,null,null,null),ve=de.exports;l["default"].use(p.ZP);const ge=[{path:"/",name:"HomeView",component:Z},{path:"/EffectEffect",name:"EffectEffect",component:J},{path:"/StateState",name:"StateState",component:K},{path:"/EventState",name:"EventState",component:se},{path:"/EffectState",name:"EffectState",component:pe},{path:"/EffectStateTime",name:"EffectStateTime",component:ve}],be=new p.ZP({mode:"history",base:"/",routes:ge});var Te=be,ye=a(4720),Se=a.n(ye);l["default"].use(Se());var Ce=a(2346),xe=a(6184),Ee=a(4557),_e=a(1372),Oe={getPreConditionLTL(e){let t="";if(""!==e){const a=e.split(" ");if(3===a.length){let e="",l="";">"===a[1]?(e=a[0],l=a[2]):"<"===a[1]&&(e=a[2],l=a[0]),t="("+e+".high & "+l+".middle)|("+e+".high & "+l+".low)|("+e+".middle & "+l+".low)"}else if(5===a.length){const e=a[0],l=a[2];"2"===a[4]?t=e+".high & "+l+".low":"-2"===a[4]&&(t=e+".low & "+l+".high")}else if(7===a.length&&-1!==a.indexOf("&&")){let e="",l="";">"===a[1]?(e=a[0],l=a[2]):"<"===a[1]&&(e=a[2],l=a[0]),t="(("+e+".high & "+l+".middle)|("+e+".high & "+l+".low)|("+e+".middle & "+l+".low))","0"===a[6]?t=t+" & "+a[4]+".off":"1"===a[6]&&(t=t+" & "+a[4]+".on")}else if(11===a.length&&-1!==a.indexOf("&&")){let e="",l="";">"===a[1]?(e=a[0],l=a[2]):"<"===a[1]&&(e=a[2],l=a[0]),t="(("+e+".high & "+l+".middle)|("+e+".high & "+l+".low)|("+e+".middle & "+l+".low))","0"===a[6]?t=t+" & "+a[4]+".off":"1"===a[6]&&(t=t+" & "+a[4]+".on"),"0"===a[10]?t=t+" & "+a[8]+".off":"1"===a[10]&&(t=t+" & "+a[8]+".on")}}return t},async getLTL(e){let t="";const a=this;for(let l=0;l<e.length;l++)await y.Z.get("/api/effect_node/"+e[l].location+"/effect_"+e[l].effect,{headers:{"Content-Type":"application/text"}}).then((e=>{const l=e.data;let s="";for(let t=0;t<l.length;t++){let e="";const i=l[t],o=i.room+"."+i.device.substring(0,i.device.length-3)+"."+i.action.substring(7,i.action.length);e=o;const n=a.getPreConditionLTL(i.pre_condition);""!==n&&(e=e+" & ("+n+")"),""!==e&&(s=s+" | ("+e+")")}s=s.substring(3,s.length),""!==s&&(t=t+" & ("+s+")")})).catch((e=>{console.log(e)}));return t}};l["default"].prototype.$api="api",l["default"].prototype.$upload="upload",l["default"].config.productionTip=!1,l["default"].use(Ce.Z,y.Z),l["default"].prototype.PROPERTY=xe,l["default"].prototype.TIME=Ee,l["default"].prototype.STATE=_e,l["default"].prototype.ltlMethod=Oe,new l["default"]({router:Te,render:e=>e(c)}).$mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var i=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,l,s,i){if(!l){var o=1/0;for(p=0;p<e.length;p++){l=e[p][0],s=e[p][1],i=e[p][2];for(var n=!0,r=0;r<l.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(n=!1,i<o&&(o=i));if(n){e.splice(p--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[l,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,i,o=l[0],n=l[1],r=l[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(r)var p=r(a)}for(t&&t(l);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(p)},l=self["webpackChunksafety_ui"]=self["webpackChunksafety_ui"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(1718)}));l=a.O(l)})();
//# sourceMappingURL=app.6e9d13fa.js.map